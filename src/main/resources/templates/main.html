<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/main.css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
            integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script type="text/javascript"
            src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=echp7ietnz"></script>
</head>
<body>
<div class="mainWrap">
    <div class="flexWrap">
        <header>
            <img src="/img/logo3.png" alt="">
            <nav>
                <ul>
                    <li>사전설문조사</li>
                    <li>지도 view</li>
                    <li>Content</li>
                    <li>Content</li>
                </ul>
            </nav>
        </header>
        <section>
            <article>
                <div class="surveyWrap">
                    <h1>당신에 취향이 궁금해요!</h1>
                    <p>선택하신 키워드를 토대로 일정을 생성합니다.</p>
                    <form th:action="@{/Main}" th:object="${survey}" method="post">

                        <div class="q q1">
                            <div>
                                <div class="qicon">Q1.</div>
                                <p>당신은 평소 실내와 실외 중 무엇을 더 선호하시나요?</p>
                            </div>
                            <div>
                                <label><input type="radio" name="q1" th:field="*{userWhere}" value="실내">실내</label>
                                <label><input type="radio" name="q1" th:field="*{userWhere}" value="실외">실외</label>
                                <label><input type="radio" name="q1" th:field="*{userWhere}" value="상관없음">상관없음</label>
                            </div>
                        </div>
                        <div class="q q1">
                            <div>
                                <div class="qicon">Q2.</div>
                                <p>당신의 평소 나들이 분위기는 어떤가요?</p>
                            </div>
                            <div>
                                <label><input type="radio" name="q2" th:field="*{userWHAT}" value="활동">나들이는 활동적인 것이 짱이죠!</label>
                                <label><input type="radio" name="q2" th:field="*{userWHAT}" value="배움">배움이 있는 나들이가 좋아요</label>
                                <label><input type="radio" name="q2" th:field="*{userWHAT}" value="힐링">나들이는 저에게 힐링하는 시간이에요~</label>
                                <label><input type="radio" name="q2" th:field="*{userWHAT}" value="맛기행">입이 즐거운 나들이가 최고에요</label>
                            </div>
                        </div>
                        <div class="q q1">
                            <div>
                                <div class="qicon">Q3.</div>
                                <p>주로 누구와 함께 하시나요?</p>
                            </div>
                            <div>
                                <label><input type="radio" name="q1" th:field="*{userWho}" value="연인">연인</label>
                                <label><input type="radio" name="q1" th:field="*{userWho}" value="자녀">자녀</label>
                                <label><input type="radio" name="q1" th:field="*{userWho}" value="친구">친구</label>
                                <label><input type="radio" name="q1" th:field="*{userWho}" value="가족">가족</label>
                                <label><input type="radio" name="q1" th:field="*{userWho}" value="혼자">혼자</label>
                            </div>
                        </div>
                        <div class="q q1">
                            <div>
                                <p>설문조사에 참여해주셔서 감사합니다~^^</p>
                                <p>선택한 답변을 바꾸고 싶으시다면 설문조사를 다시 실시해주세요!</p>
                            </div>
                            <img src="/img/like.png">
                            <button type="submit">제출하기</button>
                        </div>
                    </form>
                </div>
            </article>
            <article>
                <div id="map" style="width:80vw;height:100vh;"></div>
            </article>
            <article>SubContent 3</article>
            <article>SubContent 4</article>
        </section>
        <footer>
            <ul>
                <li sec:authentication="principal.username"></li>
                <li th:onclick="|location.href='@{/}'|">첫 페이지</li>
                <li onclick="location.href='home.html'" th:onclick="|location.href='@{/Logout}'|">로그아웃</li>
            </ul>
        </footer>
    </div>
</div>
</body>
</html>
<script>
    $(function () {
        /* navBar hover 이벤트 */
        $('header > img').hover(function () {
            $(this).attr({
                src: '/img/logo2.png',
            })
            $(this).css({width: '120px', transition: '0.5s'});
        }, function () {
            $(this).attr({
                src: '/img/logo3.png',
            })
            $(this).css({width: '100px', transition: '0.5s'});
        })

        /* navBar click 이벤트 */
        $('header nav ul li:nth-of-type(1)').on('click', function () {
            $('article:nth-of-type(1)').css({display: 'inline-block', transition: '1s'});
            $('article:nth-of-type(2)').css({display: 'none'});
            $('article:nth-of-type(3)').css({display: 'none'});
            $('article:nth-of-type(4)').css({display: 'none'});
        })

        $('header nav ul li:nth-of-type(2)').on('click', function () {
            $('article:nth-of-type(1)').css({display: 'none'});
            $('article:nth-of-type(2)').css({display: 'inline-block'});
            $('article:nth-of-type(3)').css({display: 'none'});
            $('article:nth-of-type(4)').css({display: 'none'});
        })

        $('header nav ul li:nth-of-type(3)').on('click', function () {
            $('article:nth-of-type(1)').css({display: 'none'});
            $('article:nth-of-type(2)').css({display: 'none'});
            $('article:nth-of-type(3)').css({display: 'inline-block'});
            $('article:nth-of-type(4)').css({display: 'none'});
        })

        $('header nav ul li:nth-of-type(4)').on('click', function () {
            $('article:nth-of-type(1)').css({display: 'none'});
            $('article:nth-of-type(2)').css({display: 'none'});
            $('article:nth-of-type(3)').css({display: 'none'});
            $('article:nth-of-type(4)').css({display: 'inline-block'});
        })

        /* 사전설문조사 페이지 이동 이벤트 */
        var distance = 0;
        var $point = $('.mainWrap .flexWrap section article:nth-of-type(1) .surveyWrap form .q div:nth-of-type(2) label');
        $($point).on('click', function () {
            if (distance <= -66.5) {
                return;
            }
            distance -= 12.5;
            $('section article:nth-of-type(1) .surveyWrap form').css({
                transform: 'translateX(' + distance + '%)',
                transition: '1s',
            })
            console.log('translateX(' + distance + '%)');
        })
    })


    /* 네이버 지도 API */
    var mapOptions = { //지도 옵션 설정
        center: new naver.maps.LatLng(37.4490704, 126.657250),
        disableKineticPan: false,
        zoom: 17
    };
    var Inhatc = new naver.maps.Map('map', mapOptions); //지도 생성

    var marker = new naver.maps.Marker({ //마커 표시
        position: new naver.maps.LatLng(37.4490704, 126.657250),
        map: Inhatc
    });

    naver.maps.Event.addListener(Inhatc, 'click', function (e) { //클릭한 지점으로 마커 옮기기
        marker.setPosition(e.coord);
    });

    var contentString = [ //정보창의 내용
        '<div class="iw_inner">',
        '   <h3>인하공업전문대학 7호관</h3>',
        '   <p>인천광역시 미추홀구 소성로 71<br>',
        '       <br>',
        '       <a href="https://www.inhatc.ac.kr/" target="_blank">www.inhatc.ac.kr</a>',
        '   </p>',
        '</div>'
    ].join('');

    var infowindow = new naver.maps.InfoWindow({ //정보창 객체 생성
        content: contentString
    });

    naver.maps.Event.addListener(marker, "click", function (e) { //클릭할때마다 정보창 열고 닫기
        if (infowindow.getMap()) {
            infowindow.close();
        } else {
            infowindow.open(Inhatc, marker);
        }
    });
</script>